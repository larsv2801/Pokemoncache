<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json?v=1.0.3">
    <title>Pokemon Cache</title>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
      <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
     <style>
        body{
            margin:0;
            padding:0;
        }
        #map {
            height:100dvh;
            display:flex;
            z-index:8;
            transition:0.3s;
        }

        #centreer{
            /*width:4.6vh;
            height: 4.6vh;*/
            width: 30px;
            height: 29px;
            line-height: 26px;
            border-radius: 4px;
            outline:none;
            background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.3));
            backdrop-filter: blur(4px);
            border:2px solid #16161652;
            display:flex;
            z-index:9;
            align-items:center;
            justify-content:center;
            position:absolute;
            left:10px;
            top: 80px;
            /*font-size:calc(1.2vw + 15px);*/
            /*font: 18px/20px Tahoma, Verdana, sans-serif;*/
            font-family:monospace;
            font-size: 20px;
            user-select: none;
            /*min-width:30px;
            min-height:30px;*/
        }

        #centreer:focus{
            transition:0.3s;
            background-color: #f4f4f4;
        }

        #centreer p{
            position:absolute;
            left:50%;
            transform: translate(-50%,-4%);
            user-select: none;
            font-weight:500;
        }

        #unlock{
            width:100dvw;
            height:100dvh;
            background:linear-gradient(135deg,rgba(78, 78, 78, 0.5),rgba(58, 58, 58, 0.7));
            backdrop-filter: blur(4px); 
            display:flex;
            z-index:9999999;
            position:absolute;
            left:50%;
            top:50%;
            transform: translate(-50%,-50%);
            display:none;
            transition:0.3s;
        }

        #pokemon{
            width:50dvw;
            height:50dvw;
            position:absolute;
            left:50%;
            top:50%;
            transform: translate(-50%,-50%);
            user-select: none;
        }

        #pokeball {
            width:40dvw;
            height:40dvw;
            position:absolute;
            background: url("https://art.ngfiles.com/images/386000/386577_stardoge_8-bit-pokeball.png?f1446737358");
            background-size: cover;
            left:50%;
            top:49%;
            transform: translate(-50%,-50%);
            user-select: none;
            display:none;
        }

        #kruis {
            width:50dvw;
            height:50dvw;
            position:absolute;
            background: url("https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Red_X.svg/2048px-Red_X.svg.png");
            background-size: cover;
            left:50%;
            top:50%;
            transform: translate(-50%,-50%);
            user-select: none;
            display:none;
        }

        #sluit{
           width:2vw;
            height: 2vw;
            border-radius: 3px;
            outline:none;
            background:linear-gradient(135deg,rgba(255,255,255,0.5),rgba(255,255,255,0.7)) !important;
            backdrop-filter: blur(4px) !important; 
            border:2px solid #c8c8c6b7;
            display:flex;
            z-index:9;
            align-items:center;
            justify-content:center;
            position:absolute;
            right:3vw;
            top:3vw;
            font-size:calc(1.2vw + 15px);
            min-width:30px;
            min-height:30px; 
            user-select: none;
            transition:0.3s;
        }

        #nav{
            display:flex;
            z-index:96;
            position:relative;
            gap:5vw;
            justify-content: center;
            align-items: center;
            position:fixed;
            bottom: 3vh;
            left:50%;
            transform: translate(-50%,-50%);
            width:37dvw;
            height:10vw;
            border-radius:50px;
            background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.3));
            backdrop-filter: blur(4px);
            border:1px gray solid;
        }
        #nav #homesvg{
            fill:burlywood;
            transition:0.3s;
        }
        #nav svg{
            width:8vw;
            height:8vw;
            fill:rgb(33, 33, 33);
            transition:0.3s;
        }

        .leaflet-control{
           background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.3));
            backdrop-filter: blur(4px); 
        }
        .leaflet-bar{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar a:active{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar a:focus{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar a:hover{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar:focus{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar:active{
           background:linear-gradient(135deg,rgba(255,255,255,0.0),rgba(255,255,255,0.0));
            backdrop-filter: blur(4px); 
        }

        .leaflet-bar a{
           background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.3));
            backdrop-filter: blur(4px); 
        }

        .leaflet-disabled{
           background:linear-gradient(135deg,rgba(255,255,255,0.2),rgba(255,255,255,0.3)) !important;
            backdrop-filter: blur(4px) !important; 
        }

        #settings{
            width:96dvw;
            padding:2vw;
            height:calc(100dvh - 4vw);
            overflow:hidden;
            background-color: rgb(233, 233, 233);
            display:flex;
            z-index:92;
            justify-content:center;
            position:absolute;
            display:none;
            transition:0.3s;
        }
        .tilesoort{
            width:25vw;
            height:25vw;
            border:2px solid burlywood;
            border-radius: 15px;
            transition: 0.3s;
            user-select: none;
        }

        .tilesoort:active{
            transform: scale(1.2);
            transition: 0.3s;
        }

        #tilecontainter{
            height:30dvh;
            width:96dvw;
            display:flex;
            flex-wrap:wrap;
            padding:2dvw;
            flex-direction:row;
            gap:4vw;
            justify-content:center;
        }

        #light{
            background:url(white.png);
            background-size:cover;
            user-select: none;
        }
        #dark{
            background:url(black.png);
            background-size:cover;
            user-select: none;
        }
        #voyager{
            background:url(voyager.png);
            background-size:cover;
            user-select: none;
        }
        #satellite{
            background:url(satellite.png);
            background-size:cover;
            user-select: none;
        }
        #standard{
            background:url(standard.png);
            background-size:cover;
            user-select: none;
        }
        #geel{
            background:url(geel.png);
            background-size:cover;
            user-select: none;
        }

        .leaflet-control-attribution {
            font-size: 10px;
            opacity: 0.7;
            border-radius:5px;
            background: rgba(255, 255, 255, 0.2); /* lichte achtergrond */
            backdrop-filter: blur(4px);
            bottom:3px;
            right:3px;
        }

        #collection{
            width:96dvw;
            padding:2vw;
            height:calc(100dvh - 4vw);
            background-color: rgb(233, 233, 233);
            display:flex;
            z-index:92;
            justify-content:center;
            position:absolute;
            display:none;
            top:0;
            left:0;
            overflow-x:hidden;
            user-select: none;
            transition:0.3s;
        }
        .pokémon{
            width:25vw;
            height:25vw;
            border:2px solid burlywood;
            border-radius: 15px;
            user-select: none;
            transition:0.3s;
            position:relative;
            overflow:hidden;
        }

        .pokémon h3{
            position:absolute;
            bottom:0;
            right:0;
            transform: translate(1%,60%);
            color:white;
            background:burlywood;
            padding:1vw;
            min-width:10vw;
            border-radius:5px;
            font-family:arial;
            font-size:3vw;
        }

        #pokecontainter{
            height:75dvh;
            width:95dvw;
            position:absolute;
            left:50%;
            top:7%;
            transform: translate(-50%,0%);
            display:flex;
            flex-wrap:wrap;
            padding:2dvw;
            padding-top:2dvh;
            padding-bottom:15dvh;
            flex-direction:row;
            gap:4vw;
            justify-content:center;
            max-height:100dvh;
            overflow-y:auto;
        }
        
        .toggle{
            width:8vw;
            height:4vw;
            background-color: gray;
            border: 2px solid black;
            border-radius:50px;
            position:absolute;
            display:flex;
            align-items:center;
            right:5%;
            transition:0.3s;
            user-select: none;
            cursor:pointer;
            -webkit-tap-highlight-color: transparent;
            outline:none;
        }

        .toggle:focus{
            outline:none;
        }

        .togglecirc{
            background-color: #eef3ef;
            height:4vw;
            width:4vw;
            border-radius:50px;
            position:absolute;
            left:0%;
            transition:0.3s;
            cursor:pointer;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        #toggle1cont{
            position:relative;
            font-family:arial;
            position:absolute;
            top:50%;
            left:50%;
            transform:translate(-50%,-50%);
            width:84dvw;
            padding:4vw;
            height:8vw;
            display:flex;
            align-items:center;
            user-select: none;
        }

        h1{
            user-select: none;
        }

        #progress {
            background-color:burlywood;
            border-radius: 50px;
            height:3vh;
        }
        #progressbar{
            background-color:white;
            border-radius:50px;
            width:80dvw;
            height:3vh;
            position:absolute;
            left:50%;
            /*top:1vh;*/
            transform: translate(-50%,0%);
            overflow:hidden;
        }

        /*input[type=range]::-webkit-slider-thumb{
            display:none;
            background-color: transparent;
            border:none;
            outline:none;
        }*/

        #collection h2{
            font-family: arial;
            color:black;
            font-size:5vw;
        }
        #leveltekst{
            position:absolute;
            left:1%;
            transform: translate(0%,0%);
        }
        #naarleveltekst{
            position:absolute;
            right:1%;
            transform: translate(0%,0%);
        }
        #topbar{
            width:100%;
            height:3vh;
            display:flex;
            align-items: center;
            justify-content: center;
            position:relative;
            top:2dvh;
            user-select: none;
            /*border:solid red 2px;*/
        }


        .circle {
            width:46px;
            width:46px;
            border-radius:50%;
            background-color:rgba(255, 0, 0, 0.364);
            display: flex;
            justify-content: center;
            align-items: center;
            border:2px solid black;
        }

        #vangbalk{
            background-color:rgb(255, 69, 69);
            border-radius:50px;
            width:80dvw;
            height:3vh;
            position:relative;
            left:50%;
            top:95dvh;
            transform: translate(-50%,-50%);
            overflow:hidden;
        }
        #hierin{
          width:30dvw;  
          height:3vh;
          background-color:rgb(92, 171, 74);
          position:absolute;
          left:50%;
          transform: translate(-50%,0%);
        }
        #slider{
          width:1dvw; 
          height:3vh;
          border-radius: 50px;
          position:absolute;
          left:0px;
          background-color:burlywood;
        }
     </style>
</head>
<body onload="loadeverything()">
    <div id="nav">
        <svg id="settingssvg" onclick="settings()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M269.5 156.7L283.2 96L356.8 96L370.5 156.7C372.2 164.1 377.3 170.3 384.3 173.4C395.1 178.2 405.3 184.1 414.7 191C420.8 195.5 428.8 196.9 436.1 194.6L495.6 176.1L532.4 239.9L486.6 282.2C481 287.4 478.2 294.9 479 302.4C480.3 313.9 480.3 326.1 479 337.6C478.2 345.2 481 352.7 486.6 357.8L532.4 400.1L495.6 463.9L436.1 445.4C428.8 443.1 420.9 444.5 414.7 449C405.3 455.9 395.1 461.9 384.3 466.6C377.3 469.7 372.2 475.9 370.5 483.3L356.8 544L283.2 544L269.5 483.3C267.8 475.9 262.7 469.7 255.7 466.6C244.9 461.8 234.7 455.9 225.3 449C219.2 444.5 211.2 443.1 203.9 445.4L144.4 463.9L107.6 400.1L153.4 357.8C159 352.6 161.8 345.1 161 337.6C159.7 326.1 159.7 313.9 161 302.4C161.8 294.8 159 287.3 153.4 282.2L107.6 239.9L144.4 176.1L203.9 194.6C211.2 196.9 219.1 195.5 225.3 191C234.7 184.1 244.9 178.1 255.7 173.4C262.7 170.3 267.8 164.1 269.5 156.7zM276.8 48C258.1 48 241.9 61 237.8 79.2L225.2 134.8C218.9 138 212.9 141.5 207 145.3L152.6 128.4C134.7 122.8 115.4 130.4 106.1 146.6L62.9 221.4C53.6 237.6 56.7 258.1 70.4 270.8L112.3 309.5C112 316.4 112 323.5 112.3 330.5L70.4 369.2C56.7 381.9 53.5 402.4 62.9 418.6L106.1 493.4C115.4 509.6 134.8 517.1 152.6 511.6L207.1 494.7C213 498.5 219 502 225.3 505.2L237.9 560.8C242 579 258.2 592 276.9 592L363.3 592C382 592 398.2 579 402.3 560.8L414.9 505.2C421.2 502 427.2 498.5 433.1 494.7L487.6 511.6C505.5 517.2 524.8 509.6 534.1 493.4L577.3 418.6C586.6 402.4 583.5 381.9 569.8 369.2L527.9 330.5C528.2 323.6 528.2 316.5 527.9 309.5L569.8 270.8C583.5 258.1 586.6 237.6 577.3 221.4L534 146.6C524.6 130.4 505.3 122.9 487.5 128.4L433 145.3C427.1 141.5 421.1 138 414.8 134.8L402.3 79.2C398.1 61 381.9 48 363.2 48L276.8 48zM368 320C368 346.5 346.5 368 320 368C293.5 368 272 346.5 272 320C272 293.5 293.5 272 320 272C346.5 272 368 293.5 368 320zM320 224C267 224 224 267 224 320C224 373 267 416 320 416C373 416 416 373 416 320C416 267 373 224 320 224z"/></svg>
        <svg id="homesvg" onclick="home()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M304 70.1C313.1 61.9 326.9 61.9 336 70.1L568 278.1C577.9 286.9 578.7 302.1 569.8 312C560.9 321.9 545.8 322.7 535.9 313.8L527.9 306.6L527.9 511.9C527.9 547.2 499.2 575.9 463.9 575.9L175.9 575.9C140.6 575.9 111.9 547.2 111.9 511.9L111.9 306.6L103.9 313.8C94 322.6 78.9 321.8 70 312C61.1 302.2 62 287 71.8 278.1L304 70.1zM320 120.2L160 263.7L160 512C160 520.8 167.2 528 176 528L224 528L224 424C224 384.2 256.2 352 296 352L344 352C383.8 352 416 384.2 416 424L416 528L464 528C472.8 528 480 520.8 480 512L480 263.7L320 120.3zM272 528L368 528L368 424C368 410.7 357.3 400 344 400L296 400C282.7 400 272 410.7 272 424L272 528z"/></svg>
        <svg id="collectsvg" onclick="collection()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M480 144C488.8 144 496 151.2 496 160L496 296L344 296L344 144L480 144zM496 344L496 480C496 488.8 488.8 496 480 496L344 496L344 344L496 344zM296 296L144 296L144 160C144 151.2 151.2 144 160 144L296 144L296 296zM144 344L296 344L296 496L160 496C151.2 496 144 488.8 144 480L144 344zM160 96C124.7 96 96 124.7 96 160L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 160C544 124.7 515.3 96 480 96L160 96z"/></svg>
    </div>

    <section id="settings">
        <div id="tilecontainter">
            <div class="tilesoort" id="light" onclick="changemap(white)"></div>
            <div class="tilesoort" id="dark" onclick="changemap(black)"></div>
            <div class="tilesoort" id="voyager" onclick="changemap(voyager)"></div>
            <div class="tilesoort" id="satellite" onclick="changemap(satellite)"></div>
            <div class="tilesoort" id="standard" onclick="changemap(standard)"></div>
            <div class="tilesoort" id="geel" onclick="changemap(geel)"></div>
        </div>
        <div id="toggle1cont">
            <h1 id="dltoggleh1">Dark Mode</h1>
            <div onclick="darkmode()" id="dltoggle" class="toggle">
                <div id="dltogglecirc" class="togglecirc">
            </div>
        </div>
        </div>
    </section>

    <section id="collection">
        <div id="topbar">
            <h2 id="leveltekst">0</h2>
            <div id="progressbar">
                <div id="progress"></div>
            </div>
            <h2 id="naarleveltekst">1</h2>
        </div>
        <div id="pokecontainter"></div>
    </section>

    <div id="centreer" onclick="locatie()"><p>x</p></div>

    <div id="map"></div>

    <div id="unlock">
        <button id="sluit" onclick="document.getElementById('unlock').style.display = 'none';"><p>x</p></button>
        <img src="" id="pokemon" onclick="slide = 0; checkvang()">
        <div id="pokeball"></div>
        <div id="kruis"></div>
        <div id="vangbalk">
            <div id="hierin"></div>
            <div id="slider"></div>
        </div>
    </div>

    <script>

        var map = L.map('map').setView([51.5, -0.09], 17);

        //wit - zwart
        var white = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://carto.com">CartoDB</a>'
        });

        //zwart - wit
        var black = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        //voyager
        var voyager = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        });

        //satteliet
        var satellite = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
            attribution: '&copy; <a href="https://www.esri.com">Esri</a>'
        });

        //standaard
        var standard = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19, attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>' 
        });

        //opentopop?
        var geel = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; &copy; OSM'
        });

        standard.addTo(map);

var currentLayer = standard;

function changemap(jef){

map.removeLayer(currentLayer); 
jef.addTo(map);    
currentLayer = jef;
saveeverything()
}

function settings(){
    document.getElementById("settings").style.display = "flex";
    document.getElementById("collection").style.display = "none";
    document.getElementById("homesvg").style.fill = "black";
    document.getElementById("collectsvg").style.fill = "black";
    document.getElementById("settingssvg").style.fill = "burlywood";
}

function collection(){
    document.getElementById("collection").style.display = "flex";
    document.getElementById("settings").style.display = "none";
    document.getElementById("homesvg").style.fill = "black";
    document.getElementById("collectsvg").style.fill = "burlywood";
    document.getElementById("settingssvg").style.fill = "black";
}

function home(){
    document.getElementById("settings").style.display = "none";
    document.getElementById("collection").style.display = "none";
    document.getElementById("homesvg").style.fill = "burlywood";
    document.getElementById("collectsvg").style.fill = "black";
    document.getElementById("settingssvg").style.fill = "black";
}

const latitudes = [
  50.8949, 50.8451, 51.2088,
  50.7250, 50.5010, 51.3310, 50.7969,
  50.9203, 50.0915, 50.5903, 50.3730,
  50.8210, 51.2805, 50.9083, 50.9669,
  51.2632, 50.7914, 51.0624, 51.2290,
  50.7078, 51.0727, 50.5892, 51.2111,
  51.2161, 50.9661, 50.6275, 50.7675,
  50.3533, 50.9781, 51.0019, 51.0506,
  51.1753, 50.8242, 50.7417, 50.9758,
  50.9733, 50.9710, 50.9708, 50.9600,
  50.9804
];

const longitudes = [
  4.3416, 4.3496, 3.2241,
  4.2830, 6.0990, 4.2750, 4.1972,
  5.3175, 4.5565, 4.5275, 5.8720,
  2.9310, 4.4785, 4.8072, 5.3989,
  4.7855, 3.9192, 3.6741, 4.4330,
  4.5931, 2.5937, 3.8836, 4.9294,
  4.4214, 5.5205, 6.0290, 3.0060,
  5.4714, 3.4709, 3.7090, 3.6466,
  3.9122, 2.8851, 4.3047, 3.4733,
  3.4749, 3.4722, 3.5294, 3.4852,
  3.5177
];


const names = [
  "Atomium", "Manneken Pis", "Grote Markt Brugge", "Hallerbos",
  "Signal de Botrange", "Doel (Spookdorp)", "Kasteel van Gaasbeek", "Abdijsite Herckenrode",
  "Fondry des Chiens", "Abdij van Villers-la-Ville", "Waterval van Coo", "Palingbeek Domein",
  "Speelbos Peerdsbos", "Kasteel van Horst", "Bokrijk Speeltuin", "De Lilse Bergen",
  "De Gavers", "Bourgoyen-Ossemeersen", "Park Spoor Noord", "Walibi Belgium",
  "Plopsaland De Panne", "Pairi Daiza", "Bobbejaanland", "Comics Station Antwerpen",
  "Karting Genk", "Indoor Karting Eupen", "Ice Mountain Komen", "Adventure Valley Durbuy",
  "grammene test", "Sint-Amanduskerk Zwijnaarde", "Sint-Jan-de-Doperkerk Drongen", "Sint-Bavokerk Moerbeke-Waas",
  "Sint-Martinuskerk Zillebeke", "Onze-Lieve-Vrouwkerk Alsemberg", "Sint-Jan-Baptistkerk", "NOOIT MEER OORLOG",
  "Sporting Grammene", "Palaestra", "Roger Raveel Museum"
];

let gevangenurls = [];
let gevangenids = [];
var level = 0;
var xp = 0;

var h = new Date();
var hh = h.getMinutes();
var hhh = h.getDate();
var hhhh = h.getHours();

let circleIntervals = {};

function makemap(){
for(let i = 0; i < longitudes.length; i++){

        let circleoptions = {
            color:'red',
            fillColor:'red',
            fillOpacity:'0.5',
            radius:45
        }

        if(gevangenids){
            if (gevangenids.includes(i + "d" + hhh + "h" + hhhh)) {
                circleoptions.color = 'green';
                circleoptions.fillColor = 'green';
            }
        }

        let circle = L.circle([latitudes[i], longitudes[i]], circleoptions).addTo(map);

        if(gevangenids){
            if (gevangenids.includes(i + "d" + hhh + "h" + hhhh)) {
            
            if (circleIntervals[i]) {
                clearInterval(circleIntervals[i]);
            }

            circleIntervals[i] = setInterval(function() {
                h = new Date();
                hh = h.getMinutes();
                hhh = h.getDate();
                hhhh = h.getHours();
                if (!gevangenids.includes(i + "d" + hhh + "h" + hhhh)) {
                    circle.setStyle({
                    color: 'red',
                    fillColor: 'red',
                    fillOpacity:'0.5',
                    });
                    clearInterval(circleIntervals[i]);
                }
                console.log("werkt: " + i);
            }, 2000);
            }
        }

        circle.on('click', function() {
            test(i, latitudes[i], longitudes[i]);
            console.log(i + "d" + hhh + "h" + hhhh);
            if(loclat.toFixed(3) === latitudes[i].toFixed(3) && loclong.toFixed(3) === longitudes[i].toFixed(3)){
                circle.setStyle({
                color: 'green',
                fillColor: 'green',
                fillOpacity:'0.5',
            });
            if (circleIntervals[i]) {
                clearInterval(circleIntervals[i]);
            }

            circleIntervals[i] = setInterval(function() {
                h = new Date();
                hh = h.getMinutes();
                hhh = h.getDate();
                hhhh = h.getHours();
                if (!gevangenids.includes(i + "d" + hhh + "h" + hhhh)) {
                    circle.setStyle({
                    color: 'red',
                    fillColor: 'red',
                    fillOpacity:'0.5',
                    });
                    clearInterval(circleIntervals[i]);
                }
                console.log("werkt: " + i);
            }, 2000);
            }
        });

}
}

var slide = 0;

function test(jef, latt, longg){
    if(gevangenids.includes(jef + "d" + hhh + "h" + hhhh) === false){

   
    if(loclat.toFixed(3) === latt.toFixed(3) && loclong.toFixed(3) === longg.toFixed(3)){

    console.log("ja: " + loclat.toFixed(3) + " is gelijk aan " + latt + " en " + loclong.toFixed(3) + " is gelijk aan " + longg);

    h = new Date();
    hh = h.getMinutes();
    hhh = h.getDate();
    hhhh = h.getHours();
    slide = 1;
    document.getElementById("pokemon").style.display = "flex";
    document.getElementById("pokeball").style.display = "none";
    document.getElementById("kruis").style.display = "none";
    console.log(jef + hhh);
    var random = (Math.floor(Math.random() * 31))-15;
    
    const requestOptions = {
        method: "GET",
        redirect: "follow"
    };

    fetch(`https://pokeapi.co/api/v2/pokemon/${jef + hh + random}`, requestOptions)
    .then((response) => response.json())
    .then((result) => {

        var shiny = Math.floor(Math.random() * 26);
        laatstepokemonshiny = shiny;
        console.log(shiny);
        if(shiny < 2){
        document.getElementById("unlock").style.background = "linear-gradient(135deg,rgba(237, 250, 172, 0.5),rgba(241, 255, 114, 0.7))";
         document.getElementById("pokemon").src = result.sprites.front_shiny;

         laatstepokemonurl = result.sprites.front_shiny; 
         gevangenids.push(jef + "d" + hhh + "h" + hhhh); 
        } else {
            document.getElementById("unlock").style.background = unlockcolor;
            document.getElementById("pokemon").src = result.sprites.front_default;
            
            laatstepokemonurl = result.sprites.front_default; 
            gevangenids.push(jef + "d" + hhh + "h" + hhhh); 
        }

        document.getElementById("unlock").style.display = "flex";
        
        raritycheck(jef + hh + random, shiny)
    })
    .catch((error) => console.error(error));

    } else {
        console.log("nee: " + loclat.toFixed(3) + " is niet gelijk aan " + latt.toFixed(3) + " en " + loclong.toFixed(3) + " is niet gelijk aan " + longg.toFixed(3));
    } 
 }
}

var laatstepokemonurl;
var laatstepokemonshiny;
function raritycheck(jef, shiny) {
    const requestOptions = {
        method: "GET",
        redirect: "follow"
    };

fetch(`https://pokeapi.co/api/v2/pokemon-species/${jef}`, requestOptions)
    .then((response) => response.json())
    .then((result) => {

        laatstepokemonjef = jef;
        laatstepokemonshiny = shiny;

        var rarity = result.capture_rate;
        if (rarity > 65){
            rarity = 65;
        }
        if(shiny > 2 && rarity > 13){
            rarity -= 10;
        }
        document.getElementById("hierin").style.width = rarity  + "vw";
    })
    .catch((error) => console.error(error));
}

animateslider();

var direction = 1.5;
var sliderpositie = 0;
var slide = 1;
function animateslider(){
    if(slide === 1 ){
            if (sliderpositie >= 79 || sliderpositie < 0){
                direction = direction * -1;
            }
            sliderpositie += direction;
            document.getElementById("slider").style.left = sliderpositie + "vw";
    }
    requestAnimationFrame(animateslider);
}

function checkvang(){
    slide = 0;
    var sliderpos = parseInt(document.getElementById("slider").style.left);
    var breedte = parseInt(document.getElementById("hierin").style.width);
    if(sliderpos >= (80 - breedte)/ 2 && sliderpos <= breedte + ((80 - breedte)/2)){
        console.log("jaaa");
        var el = document.createElement('div');
        el.className = "pokémon";

        if(laatstepokemonshiny < 2){
    
            el.style.background = `url(${laatstepokemonurl})`;
            el.style.borderColor = "rgb(251, 255, 145)";

        } else {
            el.style.background = `url(${laatstepokemonurl})`;
        }

        gevangenurls.push(laatstepokemonurl);
        el.style.backgroundSize = "cover";
        xp++;
        levelxp();
        document.getElementById("pokecontainter").appendChild(el);

        document.getElementById("pokemon").style.display = "none";
        document.getElementById("pokeball").style.display = "flex";
    } else {
        document.getElementById("pokemon").style.display = "none";
        document.getElementById("kruis").style.display = "flex";
        console.log("neee");
    }
    saveeverything();
}

var loclat;
var loclong;
var locatiecircle;


function testlocatieupdate(){
navigator.geolocation.getCurrentPosition((position) => {
    loclat = position.coords.latitude;
    loclong = position.coords.longitude;

    console.log(loclat + " " + loclong);

    if(locatiecircle){
        //locatie();
        locatiecircle.setLatLng([loclat, loclong]);
    } else {
    locatiecircle = L.circleMarker([loclat, loclong], {
        color:'blue',
        fillColor:'blue',
        fillOpacity:0.5,
        radius:10,
    }).addTo(map);

    map.setView([loclat, loclong], 18);
    }
    },
    (error) => {
    console.error("Kon locatie niet ophalen:", error);
    },
    { enableHighAccuracy: true, timeout: 2000 }
);
}
setInterval(testlocatieupdate,2000);
testlocatieupdate();



function locatie(){
    locatiecircle.setLatLng([loclat, loclong]);
    map.setView([loclat, loclong], 18);
    console.log("werkt");
}

var dark = 0;
var bgcolor = "rgb(233, 233, 233)";
var txcolor = "black";
var unlockcolor = "linear-gradient(135deg,rgba(255,255,255,0.5),rgba(255,255,255,0.7))";
function darkmode(){
    if(dark === 0){
        bgcolor = "rgb(44, 44, 44)";
        txcolor = "#eef3ef";
        unlockcolor = "linear-gradient(135deg,rgba(78, 78, 78, 0.5),rgba(58, 58, 58, 0.7))";
        document.getElementById("dltogglecirc").style.left = "calc(100% - 4vw)";
        document.getElementById("dltoggle").style.backgroundColor = "burlywood";
        dark = 1;

        document.getElementById("settings").style.backgroundColor = bgcolor;
        document.getElementById("collection").style.backgroundColor = bgcolor;
        document.getElementById("dltoggleh1").style.color = txcolor;
        document.getElementById("leveltekst").style.color = txcolor;
        document.getElementById("naarleveltekst").style.color = txcolor;
    } else {
        bgcolor = "rgb(233, 233, 233)";
        txcolor = "black";
        unlockcolor = "linear-gradient(135deg,rgba(255,255,255,0.5),rgba(255,255,255,0.7))";
        document.getElementById("dltogglecirc").style.left = "0%";
        document.getElementById("dltoggle").style.backgroundColor = "gray";
        dark = 0;

        document.getElementById("settings").style.backgroundColor = bgcolor;
        document.getElementById("collection").style.backgroundColor = bgcolor;
        document.getElementById("dltoggleh1").style.color = txcolor;
        document.getElementById("leveltekst").style.color = txcolor;
        document.getElementById("naarleveltekst").style.color = txcolor;
    }
    localStorage.setItem("darkmode", dark);
    saveeverything();
}

    function saveeverything(){
        localStorage.setItem("ids", JSON.stringify(gevangenids));
        localStorage.setItem("urls", JSON.stringify(gevangenurls));
        localStorage.setItem("xp", xp);
        localStorage.setItem("level", level);
        localStorage.setItem("darkmode", dark);
    }

    function loadeverything(){
        if(localStorage.getItem("ids")){
            gevangenids = JSON.parse(localStorage.getItem("ids")); 
        }
        if(localStorage.getItem("urls")){
            gevangenurls = JSON.parse(localStorage.getItem("urls")); 
        }
        if(localStorage.getItem("darkmode") === "1"){
        console.log("dark");
        dark = 1;
        bgcolor = "rgb(44, 44, 44)";
        txcolor = "#eef3ef";
        unlockcolor = "linear-gradient(135deg,rgba(78, 78, 78, 0.5),rgba(58, 58, 58, 0.7))";
        document.getElementById("dltogglecirc").style.left = "calc(100% - 4vw)";
        document.getElementById("dltoggle").style.backgroundColor = "burlywood";
        document.getElementById("settings").style.backgroundColor = bgcolor;
        document.getElementById("collection").style.backgroundColor = bgcolor;
        document.getElementById("dltoggleh1").style.color = txcolor;
        document.getElementById("leveltekst").style.color = txcolor;
        document.getElementById("naarleveltekst").style.color = txcolor;
        } else {
            dark = 0;
        }
        if(localStorage.getItem("xp")){
            xp = parseInt(localStorage.getItem("xp"));
        }
       if(localStorage.getItem("level")){
        level = parseInt(localStorage.getItem("level"));
       } else {
        level = Math.floor(xp / 10);
       }
       levelxp();

       for(let i = 0; i < gevangenurls.length; i++){
        var el = document.createElement('div');
        el.className = "pokémon";
        el.style.background = `url(${gevangenurls[i]})`;
        el.style.backgroundSize = "cover";
        if(gevangenurls[i].includes("shiny")){
        el.style.borderColor = "rgb(251, 255, 145)";
        }
        document.getElementById("pokecontainter").appendChild(el);
       }
       makemap();
    }


    function levelxp() {     
        //level = Math.floor(xp / 10);
        if(xp * (80 / (level * 10)) > 80){
            level++;
            xp = 0;
            localStorage.setItem("xp", xp);
            localStorage.setItem("level", level);
        }
        document.getElementById("progress").style.width = xp * (80 / (level * 10)) + "vw";
        document.getElementById("leveltekst").innerText = level;
        document.getElementById("naarleveltekst").innerText = level + 1;
        localStorage.setItem("xp", xp);
        localStorage.setItem("level", level);
    }
    </script>
</body>
</html>
